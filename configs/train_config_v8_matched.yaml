# DAWN v8.0 Training Config (파라미터 매칭 버전)
# SharedNeurons + NeuronMemory with Q/K/V/O/M separated neurons

# Data
data:
  base_dir: /content/drive/MyDrive/data
  train_files:
    - train/wikitext_5to1_texts.pkl
  val_files:
    - validation/wikitext_5to1_texts.pkl

# Model Architecture (v8.0 - 파라미터 증가)
model:
  model_version: "8.0"
  d_model: 256
  n_layers: 4
  n_heads: 4

  # TransformNeurons parameters (증가!)
  rank: 64
  n_input: 16             # 8 → 16 (2배)
  n_process: 32           # 유지
  n_output: 16            # 8 → 16 (2배)
  process_k: 3

  # KnowledgeNeurons parameters
  n_knowledge: 64
  knowledge_k: 8

  # Architecture
  max_seq_len: 128
  dropout: 0.1

# Training
training:
  batch_size: 128
  num_epochs: 10          # 10 epoch만
  lr: 0.0003
  weight_decay: 0.1
  warmup_epochs: 2

  orthogonality_weight: 0.01
  process_norm_weight: 0.01
  load_balance_weight: 0.01

use_amp: true

checkpoint_dir: /content/drive/MyDrive/dawn/checkpoints_v8_matched
log_dir: /content/drive/MyDrive/dawn/logs_v8_matched

# 파라미터 계산 (n_input=16, n_output=16):
#   input: 4 × 16 × 256 × 64 = 1,048,576 (+524K)
#   process: 5 × 32 × 64 = 10,240
#   output: 16 × 64 × 256 = 262,144 (+131K)
#   knowledge: 64×64 + 64×256 = 20,480
#   SharedNeurons 총: ~1.34M
#
#   예상 전체: 8.6M + 0.65M = ~9.25M (v9.1의 9.4M와 유사)
