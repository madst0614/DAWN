# DAWN v10.0 Training Config
# Simplified architecture: Compress + Expand (no Householder)
# Unified neuron pools for all Q/K/V/O/M

# Data
data:
  base_dir: /content/drive/MyDrive/data
  train_files:
    - train/wikitext_5to1_texts.pkl
  val_files:
    - validation/wikitext_5to1_texts.pkl

# Model Architecture (v10.0)
model:
  model_version: "10.0"
  d_model: 320
  n_layers: 4
  n_heads: 4

  # CompressNeurons / ExpandNeurons (통합 풀)
  rank: 80
  n_compress: 80          # Q/K/V/M 공유 (4:1 비율)
  n_expand: 20            # O 공유

  # KnowledgeNeurons
  n_knowledge: 80
  knowledge_k: 10

  # Architecture
  max_seq_len: 128
  dropout: 0.1

# Training
training:
  batch_size: 128
  num_epochs: 30
  lr: 0.0003
  weight_decay: 0.1
  warmup_ratio: 0.05

  orthogonality_weight: 0.01
  load_balance_weight: 0.01

use_amp: true
checkpoint_dir: /content/drive/MyDrive/dawn/checkpoints_v10
log_dir: /content/drive/MyDrive/dawn/logs_v10

# 파라미터 계산:
#   compress: 80 × 320 × 80 = 2,048,000
#   expand: 20 × 80 × 320 = 512,000
#   knowledge: 80×80 + 80×320 = 32,000
#   SharedNeurons 총: ~2.59M
#
#   embeddings: 30522 × 320 = 9,767,040
#   layernorms, routers 등: ~0.5M
#
#   예상 전체: ~11M (Vanilla Transformer와 동급)
